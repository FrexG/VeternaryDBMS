<!--prettier-ignore-->
{% extends 'dashboard/main.html' %}
{% load static %} {% block title %} Dashboard {%endblock title %}
{% block navstyle %}
<style>
	#sidebar-vaccination-summary {
		background-color: teal;
		color: white;
	}
</style>
{% endblock navstyle %} {% block customImport%}
<script src="{% static 'dashboard/v_dashboard.js'%}"></script>
{% endblock customImport %} {% block content %}
<!-- prettier-ignore-attribute -->

<div class="row m-2">
	<form action="" method="POST">
		{%csrf_token%} {{dateForm}}
		<input type="submit" value="Filter" class="btn btn-sm btn-primary" />
	</form>
</div>
<hr />
<div class="row overflow-auto m-2" id="summary">
	<div class="col-md-10">
		<table class="table table-striped">
			<thead>
				<tr>
					<th scope="col">Cust Name</th>
					<th scope="col">Vaccination type</th>
					<th scope="col">Batch Num.</th>
					<th scope="col">Qnty</th>
					<th scope="col">Unit</th>
					<th scope="col">Dx</th>
					<th scope="col">Date</th>
				</tr>
			</thead>
			{% for row in vaccinationObj %}
			<tr>
				<td>{{row.case_number.customer_name}}</td>
				<td>
					<!--prettier-ignore-->
					{%for vaccine in row.vaccine_id.all%}
                    {{vaccine.vaccine_type}},
                    {%endfor%}
				</td>
				<td>{{row.vaccine_batch_num}}</td>
				<td>{{row.quantity}}</td>
				<td>{{row.unit}}</td>
				<td>{%for dx in row.dx.all%}({{dx.disease_name}}){%endfor%}</td>
				<td>{{row.service_date}}</td>
				<!-- prettier-ignore-attribute -->
			</tr>
			{% endfor %}
		</table>
	</div>
	<div class="col-md-2 col-sm-12">
		<div class="card">
			<div class="card-body">
				<div class="card-header">
					<h5 class="card-title">Total Amount</h5>
				</div>
				<p class="card-text">{{totalPrice}} Birr</p>
			</div>
			<div class="card-footer">
				<p class="card-text text-primary">
					No. of Treatments:{{totalVaccinations}}
				</p>
			</div>
		</div>
	</div>
</div>
<div class="row m-2">
	<div class="col-md-8 col-sm-12">
		<canvas class="chart_canvas card" id="cntx_vaccination"></canvas>
	</div>

	<div class="col-md-4 col-sm-12">
		<h5 class="text-center">Kebele Distribution</h5>
		<table class="table table-striped m-2">
			{% for key,value in distByKebele.items %}
			<tr>
				<td>{{key}}</td>
				<td>{{value}}</td>
			</tr>
			{%endfor%}
		</table>
	</div>
</div>
{% endblock content %}
